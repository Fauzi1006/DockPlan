<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DockPlan - Executive Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; overflow-x: hidden; }
        
        /* SIDEBAR */
        .sidebar { width: 260px; background: #0f172a; color: #e2e8f0; position: fixed; top: 0; left: 0; height: 100%; z-index: 50; border-right: 1px solid #1e293b; transition: all 0.3s; }
        .sidebar.collapsed { width: 70px; }
        .sidebar.collapsed .logo-text, .sidebar.collapsed .nav-text { display: none; }
        .sidebar.collapsed .nav-item { justify-content: center; padding: 14px 0; }
        
        .nav-item { display: flex; align-items: center; padding: 14px 20px; margin: 6px 12px; border-radius: 8px; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.2s; color: #94a3b8; }
        .nav-item.active { background: #3b82f6; color: white; box-shadow: 0 4px 15px rgba(59,130,246,0.4); }

        /* MAIN CONTENT */
        .main-content { margin-left: 260px; transition: margin-left 0.3s; padding-bottom: 40px; }
        .main-content.expanded { margin-left: 70px; }

        /* COPYRIGHT FOOTER */
        .copyright-footer {
            position: fixed; bottom: 0; left: 0; width: 100%;
            text-align: center; padding: 10px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(5px);
            border-top: 1px solid #e2e8f0;
            font-size: 10px; font-weight: 700; color: #94a3b8; text-transform: uppercase; letter-spacing: 1px;
            z-index: 40; pointer-events: none;
        }

        /* STATS CARDS */
        .stat-card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); border: 1px solid #e2e8f0; display: flex; justify-content: space-between; align-items: center; transition: transform 0.2s; }
        .stat-card:hover { transform: translateY(-2px); }
        .icon-box { width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 20px; }

        /* TABLE STYLING */
        .table-container { background: white; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); overflow: hidden; border: 2px solid #64748b; }
        table { border-collapse: collapse; width: 100%; table-layout: fixed; }
        
        thead { background: #1e293b; color: #ffffff; }
        thead th { 
            padding: 14px 4px; text-align: center; font-size: 11px; font-weight: 800; 
            text-transform: uppercase; letter-spacing: 0.5px; border: 2px solid #475569; 
            vertical-align: middle;
        }
        
        td { 
            padding: 10px 4px; font-size: 11px; color: #334155; border: 2px solid #94a3b8; 
            vertical-align: middle; text-align: center; text-transform: uppercase; 
            word-wrap: break-word; white-space: normal; line-height: 1.3; font-weight: 700;
        }
        
        tbody tr:nth-child(even) { background-color: #f8fafc; }
        tbody tr:hover { background-color: #e2e8f0; }
        
        /* UTILS */
        input[type="checkbox"] { width: 16px; height: 16px; cursor: pointer; accent-color: #2563eb; }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        
        .form-input { width: 100%; padding: 10px; border: 1px solid #cbd5e1; border-radius: 6px; font-size: 12px; text-transform: uppercase; font-weight: 700; outline: none; transition: border 0.2s; }
        .form-input:focus { border-color: #3b82f6; ring: 2px solid #bfdbfe; }
        .swal2-input { margin: 5px 0 !important; font-size: 14px !important; }
        .status-waiting { color: #dc2626; font-size: 10px; font-weight: 800; letter-spacing: 0.5px; }

        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
    </style>
</head>
<body class="h-screen flex overflow-hidden">

    <aside id="sidebar" class="sidebar flex flex-col">
        <div class="h-16 flex items-center px-6 border-b border-white/10 bg-[#0b1120]">
            <div class="w-8 h-8 rounded-lg bg-blue-600 flex items-center justify-center shadow-lg mr-3 shrink-0">
                <i class="fas fa-truck-fast text-white text-sm"></i>
            </div>
            <div class="logo-text">
                <h1 class="text-white font-bold text-lg tracking-tight">DockPlan</h1>
                <p class="text-[9px] text-slate-400 font-bold uppercase tracking-widest">Logistic System</p>
            </div>
        </div>
        <nav class="flex-1 py-6 space-y-2">
            <div onclick="showPage('input')" id="menu-input" class="nav-item"><i class="fas fa-keyboard w-5 text-center"></i><span class="nav-text">Input Data</span></div>
            <div onclick="showPage('dashboard')" id="menu-dashboard" class="nav-item active"><i class="fas fa-desktop w-5 text-center"></i><span class="nav-text">Monitoring</span></div>
        </nav>
        <div class="p-4 border-t border-white/10 space-y-2">
            
            <button onclick="logout()" class="w-full py-2 rounded bg-red-600 text-white text-[10px] font-bold hover:bg-red-700 transition flex items-center justify-center gap-2 shadow-lg">
                <i class="fas fa-sign-out-alt"></i> KELUAR / GANTI AKUN
            </button>

            <button onclick="resetData()" class="w-full py-2 rounded bg-slate-800 text-slate-400 text-[10px] font-bold hover:text-white transition flex items-center justify-center gap-2">
                <i class="fas fa-trash-alt"></i> RESET DATA
            </button>
            
        </div>
    </aside>

    <main id="main-content" class="main-content flex-1 h-full overflow-y-auto pb-20 relative">
        <header class="bg-white h-16 border-b border-gray-200 flex items-center justify-between px-6 sticky top-0 z-30 shadow-sm/50 backdrop-blur-md bg-white/90">
            <div class="flex items-center gap-4">
                <button onclick="toggleSidebar()" class="text-slate-400 hover:text-blue-600 transition"><i class="fas fa-bars text-lg"></i></button>
                <div>
                    <h2 class="text-lg font-bold text-slate-800 tracking-tight">DOCKING PLANNING SYSTEM</h2>
                    <p class="text-[10px] text-blue-600 font-bold uppercase tracking-wide" id="page-subtitle">Monitoring Overview</p>
                </div>
            </div>
            <div class="flex items-center gap-3">
                <div class="text-right hidden sm:block">
                    <p class="text-[10px] font-bold text-slate-700">Logistic Admin</p>
                    <p class="text-[9px] text-slate-400">Plant Karawang</p>
                </div>
                <div class="w-8 h-8 rounded-full bg-slate-100 border border-slate-200 flex items-center justify-center text-slate-600 shadow-inner"><i class="fas fa-user-tie text-sm"></i></div>
            </div>
        </header>

        <div class="p-6 max-w-[100%] mx-auto">
            
            <div id="view-dashboard" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="stat-card border-l-4 border-blue-600">
                        <div>
                            <p class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Total Booking</p>
                            <h3 class="text-3xl font-black text-slate-800" id="stat-total">0</h3>
                        </div>
                        <div class="icon-box bg-blue-50 text-blue-600"><i class="fas fa-layer-group"></i></div>
                    </div>
                    <div class="stat-card border-l-4 border-red-500">
                        <div>
                            <p class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Menunggu Konfirmasi</p>
                            <h3 class="text-3xl font-black text-red-600" id="stat-pending">0</h3>
                        </div>
                        <div class="icon-box bg-red-50 text-red-600"><i class="fas fa-hourglass-half animate-pulse"></i></div>
                    </div>
                    <div class="stat-card border-l-4 border-emerald-500">
                        <div>
                            <p class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Terkonfirmasi</p>
                            <h3 class="text-3xl font-black text-emerald-600" id="stat-confirmed">0</h3>
                        </div>
                        <div class="icon-box bg-emerald-50 text-emerald-600"><i class="fas fa-calendar-check"></i></div>
                    </div>
                </div>

                <div class="flex flex-col md:flex-row justify-between items-center gap-3 bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                    <div class="relative w-full md:w-[350px]">
                        <i class="fas fa-search absolute left-3 top-3 text-slate-400 text-xs"></i>
                        <input type="text" id="searchInput" onkeyup="renderTable()" placeholder="Cari DN, Vendor, Unit, Driver..." class="pl-9 pr-3 py-2.5 bg-slate-50 border border-slate-200 rounded-lg w-full text-xs font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500 uppercase transition">
                    </div>
                    
                    <div class="flex gap-2">
                        <button id="btn-delete-bulk" onclick="deleteSelected()" disabled class="bg-red-500 text-white px-4 py-2.5 rounded-lg text-[10px] font-bold hover:bg-red-600 transition shadow flex items-center gap-2 disabled:bg-slate-200 disabled:text-slate-400">
                            <i class="fas fa-trash-alt"></i> HAPUS (<span id="selected-count">0</span>)
                        </button>

                        <button onclick="exportToExcel()" class="bg-emerald-600 text-white px-4 py-2.5 rounded-lg text-[10px] font-bold hover:bg-emerald-700 transition shadow flex items-center gap-2">
                            <i class="fas fa-file-excel"></i> EXCEL
                        </button>

                        
                    </div>
                </div>

                <div class="table-container">
                    <div class="overflow-x-auto">
                        <table class="w-full" id="monitoringTable">
                            <thead>
                                <tr>
                                    <th style="width: 30px;"><input type="checkbox" id="checkAll" onclick="toggleSelectAll()"></th>
                                    <th style="width: 35px;">NO</th>
                                    <th style="width: 80px;">CREATED</th>
                                    <th style="width: 120px;">NO DN</th>
                                    <th style="width: 150px;">CUSTOMER</th>
                                    <th style="width: 80px;">KOTA</th>
                                    <th style="width: 60px;">QTY<br>(TON)</th>
                                    <th style="width: 80px;">UNIT</th>
                                    <th style="width: 100px;">VENDOR</th>
                                    <th style="width: 120px;">NOPOL &<br>DRIVER</th>
                                    <th style="width: 100px;">STUFFING<br>(DATE)</th>
                                    <th style="width: 100px;">BONGKAR<br>(DATE)</th>
                                    <th style="width: 50px;">EDIT</th>
                                </tr>
                            </thead>
                            <tbody id="table-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="view-input" class="hidden max-w-6xl mx-auto space-y-6">
                
                <div class="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-100 bg-blue-50 flex justify-between items-center">
                        <h3 class="font-bold text-slate-800 flex items-center gap-2 text-sm"><i class="fas fa-file-import text-blue-600"></i> A. IMPORT DATA SAP (MASSAL)</h3>
                    </div>
                    <div class="p-6 space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="text-[10px] font-bold text-slate-500 uppercase block mb-1">AUTO VENDOR (OPSIONAL)</label>
                                <input type="text" id="input-vendor-batch" class="form-input" placeholder="ISI JIKA 1 BATCH = 1 VENDOR">
                            </div>
                            <div>
                                <label class="text-[10px] font-bold text-slate-500 uppercase block mb-1">AUTO UNIT (OPSIONAL)</label>
                                <input type="text" id="input-unit-batch" class="form-input" placeholder="ISI JIKA UNIT SAMA SEMUA">
                            </div>
                        </div>
                        <div>
                             <textarea id="paste-area" class="w-full h-32 p-3 border border-slate-300 rounded-lg font-mono text-xs focus:ring-2 focus:ring-blue-500 outline-none shadow-inner bg-slate-50 text-slate-700 uppercase" placeholder="PASTE DATA DARI SAP/EXCEL DISINI..."></textarea>
                        </div>
                        <div class="flex justify-end">
                            <button onclick="processPaste()" class="px-6 py-2 rounded-lg text-xs font-bold text-white bg-blue-600 hover:bg-blue-700 shadow-lg transition uppercase flex items-center gap-2">
                                <i class="fas fa-check-circle"></i> PROSES IMPORT
                            </button>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-100 bg-emerald-50 flex justify-between items-center">
                        <h3 class="font-bold text-slate-800 flex items-center gap-2 text-sm"><i class="fas fa-keyboard text-emerald-600"></i> B. INPUT MANUAL (SATU PER SATU)</h3>
                    </div>
                    <div class="p-6">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                            <div><label class="text-[10px] font-bold text-slate-500 block mb-1">NO DN</label><input id="man-dn" class="form-input"></div>
                            <div><label class="text-[10px] font-bold text-slate-500 block">CUSTOMER</label><input id="man-cust" class="form-input"></div>
                            <div><label class="text-[10px] font-bold text-slate-500 block">KOTA</label><input id="man-kota" class="form-input"></div>
                            <div><label class="text-[10px] font-bold text-slate-500 block">QTY (TON)</label><input type="number" id="man-qty" class="form-input"></div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <div><label class="text-[10px] font-bold text-slate-500 block mb-1">JENIS UNIT</label><input id="man-unit" class="form-input"></div>
                            <div><label class="text-[10px] font-bold text-slate-500 block">VENDOR</label><input id="man-vendor" class="form-input"></div>
                            <div><label class="text-[10px] font-bold text-slate-500 block">NOPOL</label><input id="man-nopol" class="form-input"></div>
                            <div><label class="text-[10px] font-bold text-slate-500 block">DRIVER</label><input id="man-driver" class="form-input"></div>
                        </div>
                        <div class="flex justify-end gap-3">
                            <button onclick="showPage('dashboard')" class="px-5 py-2 rounded-lg text-xs font-bold text-slate-500 hover:bg-slate-200 transition uppercase">BATAL</button>
                            <button onclick="saveManual()" class="px-6 py-2 rounded-lg text-xs font-bold text-white bg-emerald-600 hover:bg-emerald-700 shadow-lg transition uppercase flex items-center gap-2">
                                <i class="fas fa-save"></i> SIMPAN DATA MANUAL
                            </button>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </main>

    <div class="copyright-footer">
        2026 Copy Right Ahmad Fauzi - DockPlan System - ALL RIGHTS RESERVED
    </div>

    <div id="login-screen" class="fixed inset-0 bg-[#0f172a] z-[100] flex items-center justify-center transition-all duration-500 hidden">
        <div class="bg-white p-8 rounded-2xl shadow-2xl w-96 border border-slate-600 text-center">
            <div class="w-16 h-16 bg-blue-600 rounded-xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-blue-500/50">
                <i class="fas fa-key text-white text-2xl"></i>
            </div>
            <h2 class="text-2xl font-black text-slate-800 mb-1 tracking-tight">DOCKPLAN SYSTEM</h2>
            <p class="text-[10px] font-bold text-slate-400 mb-6 uppercase tracking-widest">Silakan Login</p>
            
            <div class="space-y-4 text-left">
                <div>
                    <label class="text-[10px] font-bold text-slate-500 ml-1">USERNAME</label>
                    <input type="text" id="username-input" class="w-full p-3 bg-slate-100 border border-slate-300 rounded-lg text-xs font-bold uppercase focus:ring-2 focus:ring-blue-500 outline-none" placeholder="Masukkan Username">
                </div>
                <div>
                    <label class="text-[10px] font-bold text-slate-500 ml-1">PASSWORD</label>
                    <input type="password" id="password-input" class="w-full p-3 bg-slate-100 border border-slate-300 rounded-lg text-xs font-bold focus:ring-2 focus:ring-blue-500 outline-none" placeholder="******">
                </div>
                <button onclick="prosesLogin()" class="w-full py-3 bg-slate-800 text-white rounded-lg font-bold text-sm hover:bg-slate-900 transition shadow-lg flex items-center justify-center gap-2">
                    <i class="fas fa-sign-in-alt"></i> MASUK
                </button>
            </div>
            <p class="mt-6 text-[10px] text-slate-400 font-bold">INDAH KIAT KARAWANG - 2026</p>
        </div>
    </div>

    <script>
        // --- KONFIGURASI FIREBASE (JANGAN DIUBAH) ---
    const firebaseConfig = {
      apiKey: "AIzaSyCHs4mqUYjDvdWH-HU0E6PGWsUu4yJG-kk",
      authDomain: "dockplan-system.firebaseapp.com",
      projectId: "dockplan-system",
      storageBucket: "dockplan-system.firebasestorage.app",
      messagingSenderId: "487876305197",
      appId: "1:487876305197:web:9a1d642d00f0bdf52fb3a4"
    };

    // --- MENGHUBUNGKAN KE FIREBASE ---
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore(); // Ini pengganti LocalStorage!
    
    // Cek koneksi di Console (Hanya untuk memastikan)
    console.log("Firebase berhasil dihubungkan!");

    // --- SIMPAN DULU ---
    // (Kode lama getDB dan saveDB biarkan dulu di bawah sini, nanti kita hapus pelan-pelan)

        // --- VARIABEL PENAMPUNG DATA DARI FIREBASE ---
    let localData = []; 

    // --- DATABASE AKUN (USERNAME & PASSWORD) ---
    // Daftar User: 1 Admin, 1 Customer, 5 Vendor
    const DAFTAR_AKUN = {
        // 1. AKUN ADMIN
        "FAUZI": { pass: "logistik", role: "ADMIN", nama: "ADMINISTRATOR" },

        // 2. AKUN CUSTOMER (1 Akun)
        "MGM": { pass: "123mgm", role: "CUSTOMER", nama: "MULIA GRAND" },

        // 3. AKUN VENDOR (5 Akun)
        "TNJ":   { pass: "tnj123", role: "VENDOR", nama: "TNJ" },
        "DEWI SRI":   { pass: "dewisri1234", role: "VENDOR", nama: "DEWI SRI" },
        "SILOG":   { pass: "silog12345", role: "VENDOR", nama: "SILOG" },
        "TRUKINDO":{ pass: "truk123",  role: "VENDOR", nama: "PT TRUKINDO" },
        "LANCAR":  { pass: "lancar123", role: "VENDOR", nama: "PT LANCAR TERUS" }
    };

    // --- VARIABEL GLOBAL UTAMA ---
    let USER_ROLE = ''; // Menyimpan Role (Admin/Vendor/Customer)
    let USER_NAME = ''; // Menyimpan Nama PT Asli

    // --- FUNGSI PROSES LOGIN (BARU) ---
    function prosesLogin() {
    // 1. Ambil input Username & Password dari HTML
    const userIn = document.getElementById('username-input').value.toUpperCase().trim();
    const passIn = document.getElementById('password-input').value.trim();

    // 2. Cek apakah Username ada di daftar?
    const akun = DAFTAR_AKUN[userIn];

    if (!akun) {
        // Ganti Swal dengan alert bawaan browser
        alert('Gagal: Username tidak ditemukan!');
        return;
    }

    // 3. Cek apakah Password benar?
    if (akun.pass !== passIn) {
        // Ganti Swal dengan alert bawaan browser
        alert('Gagal: Password Salah!');
        return;
    }

    // --- LOGIN BERHASIL ---
    
    // Simpan ke LocalStorage agar saat refresh tidak login ulang
    localStorage.setItem('dockplan_session', JSON.stringify({
        username: userIn,
        role: akun.role,
        nama: akun.nama
    }));

    // Jalankan fungsi masuk
    masukAplikasi(akun.role, akun.nama);

    // Sapa User dengan alert biasa
    alert(`Selamat Datang, ${akun.nama} (${akun.role})`);
}

// Fungsi tambahan untuk menangani visual perpindahan halaman
function masukAplikasi(role, nama) {
    USER_ROLE = role;
    USER_NAME = nama;

    // Sembunyikan Layar Login
    const loginScreen = document.getElementById('login-screen');
    loginScreen.classList.add('opacity-0', 'pointer-events-none');
    
    // Tambahkan class hidden setelah animasi selesai agar tidak menghalangi klik
    setTimeout(() => { loginScreen.classList.add('hidden'); }, 500);

    // Bersihkan input form biar aman
    document.getElementById('username-input').value = '';
    document.getElementById('password-input').value = '';

    // Update Tampilan & Filter Tabel
    updateUIByRole();
    renderTable(); 
}
// --- POINT 2: FUNGSI MASUK APLIKASI ---
function masukAplikasi(role, nama) {
    // 1. Simpan identitas ke variabel global agar filter tabel bekerja
    USER_ROLE = role;
    USER_NAME = nama;

    // 2. Sembunyikan Layar Login
    const loginScreen = document.getElementById('login-screen');
    
    // Gunakan 'hidden' agar elemen benar-benar hilang dari layar
    loginScreen.classList.add('hidden');
    loginScreen.classList.add('opacity-0');
    loginScreen.classList.add('pointer-events-none');

    // 3. Update judul subtitle di header agar sesuai role
    const subtitle = document.getElementById('page-subtitle');
    if (subtitle) {
        subtitle.innerText = `LOGGED IN AS: ${nama} (${role})`;
    }

    // 4. Jalankan fungsi penyesuaian UI dan Render Tabel
    updateUIByRole(); // Menampilkan/menyembunyikan menu berdasarkan role
    renderTable();    // Menggambar tabel dengan filter yang sesuai
    updateStats();    // Memperbarui angka statistik
}

    // --- FUNGSI LOGOUT / KELUAR ---
    // --- POINT 4: LOGOUT & HAPUS SESI (UPDATE) ---
function logout() {
    // Menggunakan confirm bawaan browser (Anti-Blokir)
    if (confirm("Keluar Aplikasi? Anda harus login ulang nanti.")) {
        localStorage.removeItem('dockplan_session');
        location.reload();
    }
}

    // --- FUNGSI ATUR TAMPILAN MENU ---
    function updateUIByRole() {
        // Default: Sembunyikan tombol sensitif
        const btnInput = document.getElementById('menu-input');
        const btnDelete = document.getElementById('btn-delete-bulk');
        const btnReset = document.querySelector('button[onclick="resetData()"]'); // Tombol Reset di sidebar

        if (USER_ROLE === 'ADMIN') {
            // Admin: Buka Semua
            if(btnInput) btnInput.style.display = 'flex';
            if(btnDelete) btnDelete.style.display = 'flex';
            if(btnReset) btnReset.style.display = 'flex';
        } else {
            // Vendor/Customer: Tutup Menu Input & Hapus
            if(btnInput) btnInput.style.display = 'none';
            if(btnDelete) btnDelete.style.display = 'none'; // Sembunyikan tombol hapus
            if(btnReset) btnReset.style.display = 'none'; // Sembunyikan reset
        }
    }

    // 1. FUNGSI "MATA-MATA" (LISTENER)
    // Ini akan stand by 24 jam. Kalau ada data masuk ke Firebase, 
    // dia otomatis update tabel di layar Anda.
    db.collection("bookings").orderBy("created", "desc").onSnapshot((snapshot) => {
        localData = []; // Bersihkan penampung
        snapshot.forEach((doc) => {
            let data = doc.data();
            data.id = doc.id; // Simpan ID unik dari Google
            localData.push(data);
        });
        renderTable(); // Gambar ulang tabel
        updateStats(); // Update angka statistik
        console.log("Data berhasil ditarik dari Google!");
    });

    // 2. FUNGSI GET DATA (MODIFIKASI)
    // Kita buat getDB tetap ada biar kodingan lain tidak error,
    // tapi isinya kita arahkan ke variabel localData di atas.
    function getDB() { return localData; }

    // 3. FUNGSI SAVE MANUAL (BARU)
    // Ini menggantikan cara simpan lama. Langsung kirim ke Awan (Cloud).
    function saveManual() {
        const dn = document.getElementById('man-dn').value.toUpperCase();
        const cust = document.getElementById('man-cust').value.toUpperCase();
        
        if(!dn || !cust) {
            Swal.fire('Data Kurang', 'No DN dan Customer Wajib Diisi', 'warning');
            return;
        }

        // Kirim ke Firebase
        db.collection("bookings").add({
            created: new Date().toISOString(),
            dn: dn,
            customer: cust,
            kota: document.getElementById('man-kota').value.toUpperCase(),
            qty: parseFloat(document.getElementById('man-qty').value) || 0,
            unit: document.getElementById('man-unit').value.toUpperCase(),
            vendor: document.getElementById('man-vendor').value.toUpperCase(),
            nopol: document.getElementById('man-nopol').value.toUpperCase(),
            driver: document.getElementById('man-driver').value.toUpperCase(),
            stuffing: '', 
            bongkar: '', 
            isGb: false
        }).then(() => {
            // Kalau sukses:
            ['man-dn','man-cust','man-kota','man-qty','man-unit','man-vendor','man-nopol','man-driver'].forEach(id => document.getElementById(id).value = '');
            Swal.fire({icon: 'success', title: 'Tersimpan ke Google!', timer: 1000, showConfirmButton: false});
            showPage('dashboard');
        }).catch((error) => {
            console.error("Error saving document: ", error);
            Swal.fire('Error', 'Gagal menyimpan data: ' + error.message, 'error');
        });
    }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('collapsed');
            document.getElementById('main-content').classList.toggle('expanded');
        }

        window.showPage = function(pageId) {
            document.getElementById('view-dashboard').classList.add('hidden');
            document.getElementById('view-input').classList.add('hidden');
            document.getElementById('menu-dashboard').classList.remove('active');
            document.getElementById('menu-input').classList.remove('active');
            
            document.getElementById(`view-${pageId}`).classList.remove('hidden');
            document.getElementById(`menu-${pageId}`).classList.add('active');
            
            if(pageId === 'dashboard') {
                document.getElementById('page-subtitle').innerText = 'MONITORING OVERVIEW';
                renderTable();
                updateStats();
            } else {
                document.getElementById('page-subtitle').innerText = 'DATA ENTRY';
                // Reset Fields
                document.getElementById('input-vendor-batch').value = ''; 
                document.getElementById('paste-area').value = '';
            }
        }

        // --- CHECKBOX LOGIC ---
        window.toggleSelectAll = function() {
            const isChecked = document.getElementById('checkAll').checked;
            document.querySelectorAll('.row-chk').forEach(cb => cb.checked = isChecked);
            updateDeleteButton();
        }

        window.updateDeleteButton = function() {
            const checkedCount = document.querySelectorAll('.row-chk:checked').length;
            document.getElementById('selected-count').innerText = checkedCount;
            document.getElementById('btn-delete-bulk').disabled = checkedCount === 0;
        }

        // --- FITUR HAPUS DATA (VERSI GOOGLE FIREBASE) ---
        window.deleteSelected = function() {
    // 1. Ambil semua kotak yang dicentang
    const checkboxes = document.querySelectorAll('.row-chk:checked');
    
    // Kalau tidak ada yang dicentang, stop
    if(checkboxes.length === 0) return;

    // 2. Konfirmasi Hapus menggunakan window.confirm (Anti-Blokir)
    if (confirm(`Hapus ${checkboxes.length} Data?\nData akan hilang selamanya dari server Google!`)) {
        
        // Karena Swal (Loading) tidak bisa jalan, kita beri log di console
        console.log("Sedang menghapus data...");

        const batch = db.batch(); // Pakai mode "Batch" biar cepat
        
        checkboxes.forEach((cb) => {
            const docId = cb.value; // Ambil ID unik dari Google
            const docRef = db.collection("bookings").doc(docId);
            batch.delete(docRef);
        });

        // 3. Eksekusi Hapus
        batch.commit().then(() => {
            // Sukses - Menggunakan alert bawaan
            alert("Data berhasil dihapus.");
            document.getElementById('checkAll').checked = false;
            updateDeleteButton(); // Matikan tombol hapus
        }).catch((error) => {
            // Gagal
            console.error("Gagal hapus:", error);
            alert("Error: Gagal menghapus data: " + error.message);
        });
    }
}

        // --- EXPORT EXCEL ---
        window.exportToExcel = function() {
            let db = getDB();
            if(db.length === 0) { Swal.fire('Data Kosong', 'Tidak ada data untuk diexport', 'warning'); return; }

            let csvContent = "data:text/csv;charset=utf-8,";
            csvContent += "NO,CREATED,DN,CUSTOMER,KOTA,QTY,UNIT,VENDOR,NOPOL,DRIVER,TGL STUFFING,TGL BONGKAR\n";
            
            db.forEach((item, index) => {
                const created = new Date(item.created).toLocaleDateString('id-ID');
                const cust = item.customer.replace(/,/g, " ");
                const row = [
                    index + 1,
                    created,
                    `'${item.dn}`,
                    cust,
                    item.kota,
                    item.qty,
                    item.unit,
                    item.vendor,
                    item.nopol,
                    item.driver,
                    item.stuffing || '-',
                    item.bongkar || '-'
                ].join(",");
                csvContent += row + "\n";
            });

            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", `DOCKPLAN_DATA_${new Date().getTime()}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // --- INPUT MANUAL LOGIC ---
        function saveManual() {
        const dn = document.getElementById('man-dn').value.toUpperCase();
        const cust = document.getElementById('man-cust').value.toUpperCase();
        
        if(!dn || !cust) {
            Swal.fire('Data Kurang', 'No DN dan Customer Wajib Diisi', 'warning');
            return;
        }

        // 1. LANGSUNG KIRIM KE GOOGLE (Tanpa Loading)
        db.collection("bookings").add({
            created: new Date().toISOString(),
            dn: dn,
            customer: cust,
            kota: document.getElementById('man-kota').value.toUpperCase(),
            qty: parseFloat(document.getElementById('man-qty').value) || 0,
            unit: document.getElementById('man-unit').value.toUpperCase(),
            vendor: document.getElementById('man-vendor').value.toUpperCase(),
            nopol: document.getElementById('man-nopol').value.toUpperCase(),
            driver: document.getElementById('man-driver').value.toUpperCase(),
            stuffing: '', 
            bongkar: '', 
            isGb: false
        }).catch((error) => {
            // Kalau error baru muncul notif (tapi jarang terjadi)
            console.error("Gagal simpan:", error);
            Swal.fire('Error', 'Koneksi bermasalah, data mungkin tidak tersimpan.', 'error');
        });

        // 2. LANGSUNG BERSIHKAN FORM DETIK ITU JUGA
        ['man-dn','man-cust','man-kota','man-qty','man-unit','man-vendor','man-nopol','man-driver'].forEach(id => document.getElementById(id).value = '');

        // 3. LANGSUNG PINDAH HALAMAN
        // Muncul notif kecil saja di pojok (Toast) biar tidak mengganggu
        const Toast = Swal.mixin({
            toast: true, position: 'top-end', showConfirmButton: false, timer: 1500, timerProgressBar: true
        });
        Toast.fire({ icon: 'success', title: 'Data diproses...' });
        
        showPage('dashboard');
    }

        // --- SAP PROCESSING ---
        function processPaste() {
    const rawText = document.getElementById('paste-area').value;
    const vendorBatch = document.getElementById('input-vendor-batch').value.toUpperCase().trim();
    const unitBatch = document.getElementById('input-unit-batch').value.toUpperCase().trim();
    const inputTime = new Date().toISOString();

    // Ganti Swal.fire dengan alert biasa
    if(!rawText.trim()) { 
        alert('Data Kosong: Silakan paste data dulu');
        return; 
    }

    // --- PARSING DATA ---
    const lines = rawText.trim().split('\n');
    const groupedData = {};
    let singleDataList = [];

    lines.forEach((line, index) => {
        if(!line.trim()) return;
        const cols = line.split('\t').map(c => c.trim()).filter(c => c !== '');
        if(cols.length < 7) return;

        const dn = cols[1];
        const customer = cols[3];
        const kota = cols[4];
        let qtyRaw = cols[5].replace(/,/g, '');
        let qty = parseFloat(qtyRaw);
        let cleanUnit = unitBatch || '-';
        if(!unitBatch && cols[7]) cleanUnit = cols[7].split(/[ ;.,]/)[0].toUpperCase();

        const gbMatch = line.toUpperCase().match(/GB\s*(\d+)/);
        
        const entry = {
            created: inputTime,
            dn: dn,
            customer: customer,
            kota: kota,
            qty: qty, 
            unit: cleanUnit,
            vendor: vendorBatch || '', 
            nopol: '', driver: '', stuffing: '', bongkar: '',
            isGb: false
        };

        if (gbMatch) {
            const gbCode = "GB" + gbMatch[1];
            if (!groupedData[gbCode]) {
                groupedData[gbCode] = { ...entry };
                groupedData[gbCode].dn = [entry.dn];
            } else {
                groupedData[gbCode].qty += entry.qty;
                if (!groupedData[gbCode].dn.includes(entry.dn)) {
                    groupedData[gbCode].dn.push(entry.dn);
                }
            }
        } else {
            singleDataList.push(entry);
        }
    });

    const finalMergedList = [];
    for (const key in groupedData) {
        const item = groupedData[key];
        item.dn = item.dn.join(', ');
        finalMergedList.push(item);
    }
    const allNewData = [...finalMergedList, ...singleDataList];

    // --- UPLOAD BACKGROUND ---
    if(allNewData.length > 0) {
        const batch = db.batch();
        allNewData.forEach((item) => {
            const docRef = db.collection("bookings").doc();
            batch.set(docRef, item);
        });

        batch.commit()
            .then(() => {
                console.log("Upload berhasil ke Firebase.");
            })
            .catch(err => {
                console.error("Gagal batch:", err);
                alert("Gagal mengirim data ke server: " + err.message);
            });

        // LANGSUNG PINDAH TAMPILAN
        document.getElementById('paste-area').value = '';
        document.getElementById('input-vendor-batch').value = '';
        
        // Ganti Toast Swal dengan alert sederhana
        alert(`${allNewData.length} Data berhasil diproses ke server.`);

        showPage('dashboard');

    } else {
        alert('Gagal: Format data tidak sesuai.');
    }
}

        // --- RENDER TABLE ---
        // --- FUNGSI RENDER TABEL (VERSI FIX TOMBOL EDIT) ---
        function renderTable() {
            // Ambil text pencarian
            const filter = document.getElementById('searchInput').value.toUpperCase();
            
            // 1. Ambil data dari penampung lokal (localData)
            let db = localData;

            // --- [BAGIAN BARU] FILTER DATA BERDASARKAN SIAPA YANG LOGIN ---
            if (USER_ROLE === 'CUSTOMER') {
                // Jika Customer: Hanya tampilkan data yang nama Customernya SAMA dengan USER_NAME
                // (Menggunakan .includes agar pencarian tidak harus 100% persis, misal "PT INDAH" bisa baca "INDAH KIAT")
                db = db.filter(item => item.customer && item.customer.includes(USER_NAME));
            } 
            else if (USER_ROLE === 'VENDOR') {
                // Jika Vendor: Hanya tampilkan data yang Vendornya SAMA dengan USER_NAME
                db = db.filter(item => item.vendor && item.vendor.includes(USER_NAME));
            }
            // Jika ADMIN: Tidak ada filter (db tetap utuh / lihat semua)
            // -------------------------------------------------------------

            // 2. Logika Filter Pencarian (Search Box)
            if(filter) {
                db = db.filter(i => 
                    (i.dn && i.dn.includes(filter)) || 
                    (i.customer && i.customer.toUpperCase().includes(filter)) ||
                    (i.kota && i.kota.toUpperCase().includes(filter)) ||
                    (i.unit && i.unit.toUpperCase().includes(filter)) ||
                    (i.vendor && i.vendor.toUpperCase().includes(filter)) ||
                    (i.nopol && i.nopol.toUpperCase().includes(filter)) ||
                    (i.driver && i.driver.toUpperCase().includes(filter))
                );
            }

            const tbody = document.getElementById('table-body');
            tbody.innerHTML = '';
            document.getElementById('checkAll').checked = false;
            updateDeleteButton();

            // Jika Data Kosong
            if(db.length === 0) {
                tbody.innerHTML = `<tr><td colspan="13" class="py-16 text-slate-400 italic font-bold">DATA KOSONG / TIDAK DITEMUKAN</td></tr>`;
                return;
            }

            // Loop Data
            db.forEach((item, idx) => {
                const dCreated = new Date(item.created);
                const showCreated = `${dCreated.getDate()}/${dCreated.getMonth()+1} ${String(dCreated.getHours()).padStart(2,'0')}:${String(dCreated.getMinutes()).padStart(2,'0')}`;

                const formatJadwal = (val) => {
                    if(!val) return '<span class="status-waiting">MENUNGGU<br>KONFIRMASI</span>';
                    const d = new Date(val);
                    const months = ["JAN", "FEB", "MAR", "APR", "MEI", "JUN", "JUL", "AGU", "SEP", "OKT", "NOV", "DES"];
                    return `<div class="text-blue-800 text-[11px]">${d.getDate()} ${months[d.getMonth()]} ${d.getFullYear()}</div>`;
                };

                const displayQty = Math.round(item.qty).toLocaleString('id-ID');

                const row = `
                    <tr class="transition group border-b border-slate-300 hover:bg-slate-100">
                        <td><input type="checkbox" class="row-chk" value="${item.id}" onclick="updateDeleteButton()"></td>
                        <td class="bg-slate-50 font-bold text-slate-500">${idx + 1}</td>
                        <td class="font-bold text-slate-600 bg-slate-50 text-[9px] leading-tight">${showCreated}</td>
                        <td class="font-bold text-blue-700 break-words text-[10px] leading-tight">${item.dn}</td>
                        <td class="font-bold text-slate-700 leading-tight">${item.customer}</td>
                        <td class="text-slate-600 font-bold">${item.kota}</td>
                        <td class="font-black text-slate-700 bg-slate-50">${displayQty}</td>
                        <td class="font-bold text-slate-700">${item.unit}</td>
                        <td class="font-bold text-slate-600">${item.vendor || '-'}</td>
                        
                        <td class="bg-slate-50">
                            <div class="font-black text-slate-800 border-b border-slate-300 pb-1 mb-1">${item.nopol || '-'}</div>
                            <div class="font-bold text-slate-500 text-[9px]">${item.driver || '-'}</div>
                        </td>

                        <td class="bg-yellow-50 border-x border-slate-300">${formatJadwal(item.stuffing)}</td>
                        <td class="bg-green-50 border-r border-slate-300">${formatJadwal(item.bongkar)}</td>
                        <td>
                            <div class="flex justify-center gap-1">
                                <button onclick="editItem('${item.id}')" class="text-blue-600 hover:text-blue-800 p-2 rounded hover:bg-blue-100 transition">
                                    <i class="fas fa-edit"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function updateStats() {
            const db = getDB();
            const total = db.length;
            const confirmed = db.filter(i => i.stuffing && i.bongkar).length;
            const pending = total - confirmed;

            document.getElementById('stat-total').innerText = total;
            document.getElementById('stat-pending').innerText = pending;
            document.getElementById('stat-confirmed').innerText = confirmed;
        }

        // --- FITUR EDIT DATA (VERSI GOOGLE FIREBASE) ---
        // --- FITUR EDIT PINTAR (SESUAI LOGIN) ---
    // --- FUNGSI BUKA MODAL EDIT ---
function editItem(id) {
    const item = localData.find(i => i.id === id);
    if (!item) return;

    // 1. Isi Form dengan Data Lama
    document.getElementById('edit-id').value = id;
    document.getElementById('edit-dn').value = item.dn;
    document.getElementById('edit-cust').value = item.customer;
    document.getElementById('edit-unit').value = item.unit;
    document.getElementById('edit-qty').value = item.qty;
    document.getElementById('edit-kota').value = item.kota;
    document.getElementById('edit-vendor').value = item.vendor;
    document.getElementById('edit-nopol').value = item.nopol;
    document.getElementById('edit-driver').value = item.driver;
    document.getElementById('edit-stuffing').value = item.stuffing;
    document.getElementById('edit-bongkar').value = item.bongkar;

    // 2. ATUR PERIZINAN (Siapa Boleh Edit Apa)
    // Default: Matikan Semua Dulu
    const allInputs = ['edit-dn','edit-cust','edit-unit','edit-qty','edit-kota','edit-vendor','edit-nopol','edit-driver','edit-stuffing','edit-bongkar'];
    allInputs.forEach(id => {
        document.getElementById(id).disabled = true;
        document.getElementById(id).style.backgroundColor = "#f1f5f9"; // Warna abu-abu
    });

    // Cek Role
    if (USER_ROLE === 'ADMIN') {
        // ADMIN: Buka Semua
        allInputs.forEach(id => {
            document.getElementById(id).disabled = false;
            document.getElementById(id).style.backgroundColor = "white";
        });
    } 
    else if (USER_ROLE === 'VENDOR') {
        // VENDOR: Hanya Nopol & Driver
        ['edit-nopol', 'edit-driver'].forEach(id => {
            document.getElementById(id).disabled = false;
            document.getElementById(id).style.backgroundColor = "white";
            document.getElementById(id).style.border = "2px solid #3b82f6"; // Highlight Biru
        });
    } 
    else if (USER_ROLE === 'CUSTOMER') {
        // CUSTOMER: Hanya Tanggal Bongkar
        ['edit-bongkar'].forEach(id => {
            document.getElementById(id).disabled = false;
            document.getElementById(id).style.backgroundColor = "white";
            document.getElementById(id).style.border = "2px solid #22c55e"; // Highlight Hijau
        });
    }

    // 3. Tampilkan Modal
    document.getElementById('modal-edit').style.display = 'flex';
}

// --- FUNGSI TUTUP MODAL ---
function tutupModal() {
    document.getElementById('modal-edit').style.display = 'none';
}

// --- FUNGSI SIMPAN KE FIREBASE ---
function simpanPerubahan() {
    const id = document.getElementById('edit-id').value;
    
    // Ambil data dari form
    const updates = {
        dn: document.getElementById('edit-dn').value.toUpperCase(),
        customer: document.getElementById('edit-cust').value.toUpperCase(),
        unit: document.getElementById('edit-unit').value.toUpperCase(),
        qty: parseFloat(document.getElementById('edit-qty').value) || 0,
        kota: document.getElementById('edit-kota').value.toUpperCase(),
        vendor: document.getElementById('edit-vendor').value.toUpperCase(),
        nopol: document.getElementById('edit-nopol').value.toUpperCase(),
        driver: document.getElementById('edit-driver').value.toUpperCase(),
        stuffing: document.getElementById('edit-stuffing').value,
        bongkar: document.getElementById('edit-bongkar').value
    };

    // Filter: Jangan simpan field yang di-disabled (biar user nakal gak bisa hack via inspect element)
    // Tapi karena kita pakai firebase update, kita cukup percaya input yang enabled saja.
    // Untuk keamanan extra di sisi klien (Client Side):
    if (USER_ROLE === 'VENDOR') {
        // Hapus data yang bukan hak vendor dari objek update
        delete updates.dn; delete updates.customer; delete updates.unit; 
        delete updates.qty; delete updates.kota; delete updates.vendor; 
        delete updates.stuffing; delete updates.bongkar;
    }
    if (USER_ROLE === 'CUSTOMER') {
        // Hapus semua kecuali bongkar
        const bongkarSaja = { bongkar: updates.bongkar };
        // Timpa updates dengan objek baru
        // (Cara cepat: kita pakai object updates yg sudah ada tapi kita bersihkan isinya)
        // Agar aman, kita buat ulang variable updates untuk customer:
        db.collection("bookings").doc(id).update({ bongkar: updates.bongkar })
        .then(() => { alert("Jadwal Bongkar Terupdate!"); tutupModal(); })
        .catch((e) => alert("Error: " + e.message));
        return; 
    }

    // Eksekusi Simpan (Admin & Vendor & Generic)
    db.collection("bookings").doc(id).update(updates)
    .then(() => {
        alert("Data Berhasil Disimpan!");
        tutupModal();
    })
    .catch((error) => {
        alert("Gagal Simpan: " + error.message);
    });
}

        function resetData() {
        Swal.fire('Fitur Dimatikan', 'Demi keamanan data Cloud, tombol Reset Global dinonaktifkan.', 'info');
    }
        renderTable();
        // --- POINT 3: AUTO-LOGIN SAAT REFRESH ---
// Fungsi ini akan berjalan otomatis setiap kali halaman dimuat (onload)
window.onload = function() {
    // 1. Cek apakah ada data login tersimpan di browser
    const savedUser = localStorage.getItem('dockplan_session');

    if (savedUser) {
        // 2. Jika ada, bongkar datanya
        const data = JSON.parse(savedUser);
        
        // 3. Langsung masuk ke aplikasi tanpa lewat layar login
        masukAplikasi(data.role, data.nama);
        
        console.log("Auto-login berhasil sebagai: " + data.nama);
    } else {
        // 4. Jika tidak ada data, pastikan layar login muncul
        document.getElementById('login-screen').classList.remove('hidden');
        document.getElementById('login-screen').classList.remove('opacity-0');
        document.getElementById('login-screen').classList.remove('pointer-events-none');
        
        console.log("Sesi tidak ditemukan, silakan login.");
    }
};
    </script>
    <div id="modal-edit" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; align-items: center; justify-content: center;">
    <div style="background: white; padding: 20px; width: 90%; max-width: 500px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); max-height: 90vh; overflow-y: auto;">
        
        <h3 style="margin-bottom: 15px; font-weight: bold; border-bottom: 2px solid #eee; padding-bottom: 10px;">EDIT DATA</h3>
        
        <input type="hidden" id="edit-id">

        <div style="display: grid; gap: 10px;">
            <div>
                <label style="font-size: 10px; font-weight: bold; color: #666;">NO DN</label>
                <input type="text" id="edit-dn" class="form-input" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
            </div>
            <div>
                <label style="font-size: 10px; font-weight: bold; color: #666;">CUSTOMER</label>
                <input type="text" id="edit-cust" class="form-input" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div>
                    <label style="font-size: 10px; font-weight: bold; color: #666;">UNIT</label>
                    <input type="text" id="edit-unit" class="form-input" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
                </div>
                <div>
                    <label style="font-size: 10px; font-weight: bold; color: #666;">QTY</label>
                    <input type="number" id="edit-qty" class="form-input" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
                </div>
            </div>
            <div>
                <label style="font-size: 10px; font-weight: bold; color: #666;">KOTA</label>
                <input type="text" id="edit-kota" class="form-input" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
            </div>

            <div style="background: #f0f9ff; padding: 10px; border-radius: 4px; border: 1px solid #bae6fd;">
                <label style="font-size: 10px; font-weight: bold; color: #0284c7; display: block; margin-bottom: 5px;">AREA VENDOR</label>
                <div>
                    <label style="font-size: 10px; font-weight: bold; color: #666;">VENDOR NAME</label>
                    <input type="text" id="edit-vendor" class="form-input" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; margin-bottom: 5px;">
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <div>
                        <label style="font-size: 10px; font-weight: bold; color: #666;">NOPOL</label>
                        <input type="text" id="edit-nopol" class="form-input" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
                    </div>
                    <div>
                        <label style="font-size: 10px; font-weight: bold; color: #666;">DRIVER</label>
                        <input type="text" id="edit-driver" class="form-input" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
                    </div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div style="background: #fefce8; padding: 5px; border: 1px solid #fef08a;">
                    <label style="font-size: 10px; font-weight: bold; color: #854d0e;">TGL STUFFING</label>
                    <input type="date" id="edit-stuffing" class="form-input" style="width: 100%; padding: 5px; border: 1px solid #ccc;">
                </div>
                <div style="background: #f0fdf4; padding: 5px; border: 1px solid #bbf7d0;">
                    <label style="font-size: 10px; font-weight: bold; color: #166534;">TGL BONGKAR</label>
                    <input type="date" id="edit-bongkar" class="form-input" style="width: 100%; padding: 5px; border: 1px solid #ccc;">
                </div>
            </div>
        </div>

        <div style="margin-top: 20px; display: flex; justify-content: flex-end; gap: 10px;">
            <button onclick="tutupModal()" style="padding: 10px 20px; background: #94a3b8; color: white; border: none; border-radius: 4px; font-weight: bold; cursor: pointer;">BATAL</button>
            <button onclick="simpanPerubahan()" style="padding: 10px 20px; background: #2563eb; color: white; border: none; border-radius: 4px; font-weight: bold; cursor: pointer;">SIMPAN DATA</button>
        </div>
    </div>
</div>
</body>
</html>
